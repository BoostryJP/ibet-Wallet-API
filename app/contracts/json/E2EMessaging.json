{
  "abi": [
    {
      "inputs": [],
      "stateMutability": "nonpayable",
      "type": "constructor"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "address",
          "name": "sender",
          "type": "address"
        },
        {
          "indexed": true,
          "internalType": "address",
          "name": "receiver",
          "type": "address"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "time",
          "type": "uint256"
        },
        {
          "indexed": false,
          "internalType": "string",
          "name": "text",
          "type": "string"
        }
      ],
      "name": "Message",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "address",
          "name": "sender",
          "type": "address"
        },
        {
          "indexed": true,
          "internalType": "address",
          "name": "receiver",
          "type": "address"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "index",
          "type": "uint256"
        }
      ],
      "name": "MessageCleared",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "address",
          "name": "who",
          "type": "address"
        },
        {
          "indexed": false,
          "internalType": "string",
          "name": "key",
          "type": "string"
        },
        {
          "indexed": false,
          "internalType": "string",
          "name": "key_type",
          "type": "string"
        }
      ],
      "name": "PublicKeyUpdated",
      "type": "event"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "_to",
          "type": "address"
        },
        {
          "internalType": "uint256",
          "name": "_index",
          "type": "uint256"
        }
      ],
      "name": "clearMessage",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "_who",
          "type": "address"
        }
      ],
      "name": "getLastMessage",
      "outputs": [
        {
          "internalType": "address",
          "name": "_from",
          "type": "address"
        },
        {
          "internalType": "string",
          "name": "_text",
          "type": "string"
        },
        {
          "internalType": "uint256",
          "name": "_time",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "_who",
          "type": "address"
        },
        {
          "internalType": "uint256",
          "name": "_index",
          "type": "uint256"
        }
      ],
      "name": "getMessageByIndex",
      "outputs": [
        {
          "internalType": "address",
          "name": "_from",
          "type": "address"
        },
        {
          "internalType": "string",
          "name": "_text",
          "type": "string"
        },
        {
          "internalType": "uint256",
          "name": "_time",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "_who",
          "type": "address"
        }
      ],
      "name": "getPublicKey",
      "outputs": [
        {
          "internalType": "string",
          "name": "_key",
          "type": "string"
        },
        {
          "internalType": "string",
          "name": "_key_type",
          "type": "string"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        }
      ],
      "name": "keys",
      "outputs": [
        {
          "internalType": "string",
          "name": "key",
          "type": "string"
        },
        {
          "internalType": "string",
          "name": "key_type",
          "type": "string"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "_who",
          "type": "address"
        }
      ],
      "name": "lastIndex",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "_index",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        }
      ],
      "name": "last_msg_index",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        },
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "name": "messages",
      "outputs": [
        {
          "internalType": "address",
          "name": "from",
          "type": "address"
        },
        {
          "internalType": "string",
          "name": "text",
          "type": "string"
        },
        {
          "internalType": "uint256",
          "name": "time",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "_to",
          "type": "address"
        },
        {
          "internalType": "string",
          "name": "_text",
          "type": "string"
        }
      ],
      "name": "sendMessage",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "string",
          "name": "_key",
          "type": "string"
        },
        {
          "internalType": "string",
          "name": "_key_type",
          "type": "string"
        }
      ],
      "name": "setPublicKey",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    }
  ],
  "bytecode": "608060405234801561001057600080fd5b50610ed0806100206000396000f3fe608060405234801561001057600080fd5b50600436106100bb576000357c010000000000000000000000000000000000000000000000000000000090048063857cdbb811610083578063857cdbb81461015e578063c45d9bea14610171578063de6f24bb14610184578063e0c01bfe14610197578063edc8f0d8146101aa57600080fd5b8063070e3a71146100c05780631b6e23ea146100d557806342ac87cf146101085780634e6bd1c01461011b578063670d14b21461013d575b600080fd5b6100d36100ce366004610b57565b6101d3565b005b6100f56100e3366004610b81565b60006020819052908152604090205481565b6040519081526020015b60405180910390f35b6100d3610116366004610c5f565b61031c565b61012e610129366004610b57565b6103ab565b6040516100ff93929190610d10565b61015061014b366004610b81565b610480565b6040516100ff929190610d42565b61015061016c366004610b81565b6105ac565b61012e61017f366004610b57565b6106f0565b6100d3610192366004610d70565b6107ae565b61012e6101a5366004610b81565b6108ae565b6100f56101b8366004610b81565b600160a060020a031660009081526020819052604090205490565b600160a060020a03808316600090815260016020908152604080832085845282529182902080548351808501909452600684527f36313031303100000000000000000000000000000000000000000000000000009284019290925292163314610272576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016102699190610db4565b60405180910390fd5b50600160a060020a0383166000908152600160208181526040808420868552808352818520805473ffffffffffffffffffffffffffffffffffffffff19163317815582518085019384905286815295889052925292516102d6939190920191610aa2565b50604051828152600160a060020a0384169033907f68290397e9c550791c692a43bd678e06c59bc776f6f670778d58dd4d8903f5de9060200160405180910390a3505050565b336000908152600260209081526040909120835161033c92850190610aa2565b50336000908152600260209081526040909120825161036392600190920191840190610aa2565b5033600160a060020a03167fe963a0dc3358a0b8e4c9c301f3003bfbd501c8b1ca3497838a39b6e7208d4e32838360405161039f929190610d42565b60405180910390a25050565b600160a060020a03828116600090815260016020818152604080842086855290915282208054600282015491909201805493946060948694909116929082906103f390610dc7565b80601f016020809104026020016040519081016040528092919081815260200182805461041f90610dc7565b801561046c5780601f106104415761010080835404028352916020019161046c565b820191906000526020600020905b81548152906001019060200180831161044f57829003601f168201915b505050505091509250925092509250925092565b60026020526000908152604090208054819061049b90610dc7565b80601f01602080910402602001604051908101604052809291908181526020018280546104c790610dc7565b80156105145780601f106104e957610100808354040283529160200191610514565b820191906000526020600020905b8154815290600101906020018083116104f757829003601f168201915b50505050509080600101805461052990610dc7565b80601f016020809104026020016040519081016040528092919081815260200182805461055590610dc7565b80156105a25780601f10610577576101008083540402835291602001916105a2565b820191906000526020600020905b81548152906001019060200180831161058557829003601f168201915b5050505050905082565b600160a060020a038116600090815260026020526040902080546060918291600182019082906105db90610dc7565b80601f016020809104026020016040519081016040528092919081815260200182805461060790610dc7565b80156106545780601f1061062957610100808354040283529160200191610654565b820191906000526020600020905b81548152906001019060200180831161063757829003601f168201915b5050505050915080805461066790610dc7565b80601f016020809104026020016040519081016040528092919081815260200182805461069390610dc7565b80156106e05780601f106106b5576101008083540402835291602001916106e0565b820191906000526020600020905b8154815290600101906020018083116106c357829003601f168201915b5050505050905091509150915091565b6001602081815260009384526040808520909152918352912080549181018054600160a060020a039093169261072590610dc7565b80601f016020809104026020016040519081016040528092919081815260200182805461075190610dc7565b801561079e5780601f106107735761010080835404028352916020019161079e565b820191906000526020600020905b81548152906001019060200180831161078157829003601f168201915b5050505050908060020154905083565b600160a060020a038216600090815260016020818152604080842084835281852080548652818452828620805473ffffffffffffffffffffffffffffffffffffffff1916331790555485528252909220835161081293919092019190840190610aa2565b50600160a060020a038216600081815260016020908152604080832083835281842080548552908352908320426002909101559282528190528154919061085883610e49565b919050555081600160a060020a031633600160a060020a03167fdd99aef5e4fdfad84059320be40f5dc0f015dc4025f56bd4010608c6743bc22e42846040516108a2929190610e62565b60405180910390a35050565b6000606060008060008086600160a060020a0316600160a060020a0316815260200190815260200160002054116040518060400160405280600681526020017f363130303031000000000000000000000000000000000000000000000000000081525090610949576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016102699190610db4565b50600160a060020a03841660009081526001602081815260408084209184905283205490929161097891610e83565b81526020808201929092526040908101600090812054600160a060020a03888116835260018086528484209584905293832054911693926109b891610e83565b815260208082019290925260409081016000908120600160a060020a03891682526001808552838320948390529282205490830193926109f791610e83565b815260200190815260200160002060020154818054610a1590610dc7565b80601f0160208091040260200160405190810160405280929190818152602001828054610a4190610dc7565b8015610a8e5780601f10610a6357610100808354040283529160200191610a8e565b820191906000526020600020905b815481529060010190602001808311610a7157829003601f168201915b505050505091509250925092509193909250565b828054610aae90610dc7565b90600052602060002090601f016020900481019282610ad05760008555610b16565b82601f10610ae957805160ff1916838001178555610b16565b82800160010185558215610b16579182015b82811115610b16578251825591602001919060010190610afb565b50610b22929150610b26565b5090565b5b80821115610b225760008155600101610b27565b8035600160a060020a0381168114610b5257600080fd5b919050565b60008060408385031215610b6a57600080fd5b610b7383610b3b565b946020939093013593505050565b600060208284031215610b9357600080fd5b610b9c82610b3b565b9392505050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b600082601f830112610be357600080fd5b813567ffffffffffffffff80821115610bfe57610bfe610ba3565b604051601f8301601f19908116603f01168101908282118183101715610c2657610c26610ba3565b81604052838152866020858801011115610c3f57600080fd5b836020870160208301376000602085830101528094505050505092915050565b60008060408385031215610c7257600080fd5b823567ffffffffffffffff80821115610c8a57600080fd5b610c9686838701610bd2565b93506020850135915080821115610cac57600080fd5b50610cb985828601610bd2565b9150509250929050565b6000815180845260005b81811015610ce957602081850181015186830182015201610ccd565b81811115610cfb576000602083870101525b50601f01601f19169290920160200192915050565b600160a060020a0384168152606060208201526000610d326060830185610cc3565b9050826040830152949350505050565b604081526000610d556040830185610cc3565b8281036020840152610d678185610cc3565b95945050505050565b60008060408385031215610d8357600080fd5b610d8c83610b3b565b9150602083013567ffffffffffffffff811115610da857600080fd5b610cb985828601610bd2565b602081526000610b9c6020830184610cc3565b600281046001821680610ddb57607f821691505b602082108103610e14577f4e487b7100000000000000000000000000000000000000000000000000000000600052602260045260246000fd5b50919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601160045260246000fd5b600060018201610e5b57610e5b610e1a565b5060010190565b828152604060208201526000610e7b6040830184610cc3565b949350505050565b600082821015610e9557610e95610e1a565b50039056fea2646970667358221220fbbb52993f1e8ab835d83e86b17242ead529f69dccd0a59b49c93df6048d078c64736f6c634300080d0033",
  "deployedBytecode": "608060405234801561001057600080fd5b50600436106100bb576000357c010000000000000000000000000000000000000000000000000000000090048063857cdbb811610083578063857cdbb81461015e578063c45d9bea14610171578063de6f24bb14610184578063e0c01bfe14610197578063edc8f0d8146101aa57600080fd5b8063070e3a71146100c05780631b6e23ea146100d557806342ac87cf146101085780634e6bd1c01461011b578063670d14b21461013d575b600080fd5b6100d36100ce366004610b57565b6101d3565b005b6100f56100e3366004610b81565b60006020819052908152604090205481565b6040519081526020015b60405180910390f35b6100d3610116366004610c5f565b61031c565b61012e610129366004610b57565b6103ab565b6040516100ff93929190610d10565b61015061014b366004610b81565b610480565b6040516100ff929190610d42565b61015061016c366004610b81565b6105ac565b61012e61017f366004610b57565b6106f0565b6100d3610192366004610d70565b6107ae565b61012e6101a5366004610b81565b6108ae565b6100f56101b8366004610b81565b600160a060020a031660009081526020819052604090205490565b600160a060020a03808316600090815260016020908152604080832085845282529182902080548351808501909452600684527f36313031303100000000000000000000000000000000000000000000000000009284019290925292163314610272576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016102699190610db4565b60405180910390fd5b50600160a060020a0383166000908152600160208181526040808420868552808352818520805473ffffffffffffffffffffffffffffffffffffffff19163317815582518085019384905286815295889052925292516102d6939190920191610aa2565b50604051828152600160a060020a0384169033907f68290397e9c550791c692a43bd678e06c59bc776f6f670778d58dd4d8903f5de9060200160405180910390a3505050565b336000908152600260209081526040909120835161033c92850190610aa2565b50336000908152600260209081526040909120825161036392600190920191840190610aa2565b5033600160a060020a03167fe963a0dc3358a0b8e4c9c301f3003bfbd501c8b1ca3497838a39b6e7208d4e32838360405161039f929190610d42565b60405180910390a25050565b600160a060020a03828116600090815260016020818152604080842086855290915282208054600282015491909201805493946060948694909116929082906103f390610dc7565b80601f016020809104026020016040519081016040528092919081815260200182805461041f90610dc7565b801561046c5780601f106104415761010080835404028352916020019161046c565b820191906000526020600020905b81548152906001019060200180831161044f57829003601f168201915b505050505091509250925092509250925092565b60026020526000908152604090208054819061049b90610dc7565b80601f01602080910402602001604051908101604052809291908181526020018280546104c790610dc7565b80156105145780601f106104e957610100808354040283529160200191610514565b820191906000526020600020905b8154815290600101906020018083116104f757829003601f168201915b50505050509080600101805461052990610dc7565b80601f016020809104026020016040519081016040528092919081815260200182805461055590610dc7565b80156105a25780601f10610577576101008083540402835291602001916105a2565b820191906000526020600020905b81548152906001019060200180831161058557829003601f168201915b5050505050905082565b600160a060020a038116600090815260026020526040902080546060918291600182019082906105db90610dc7565b80601f016020809104026020016040519081016040528092919081815260200182805461060790610dc7565b80156106545780601f1061062957610100808354040283529160200191610654565b820191906000526020600020905b81548152906001019060200180831161063757829003601f168201915b5050505050915080805461066790610dc7565b80601f016020809104026020016040519081016040528092919081815260200182805461069390610dc7565b80156106e05780601f106106b5576101008083540402835291602001916106e0565b820191906000526020600020905b8154815290600101906020018083116106c357829003601f168201915b5050505050905091509150915091565b6001602081815260009384526040808520909152918352912080549181018054600160a060020a039093169261072590610dc7565b80601f016020809104026020016040519081016040528092919081815260200182805461075190610dc7565b801561079e5780601f106107735761010080835404028352916020019161079e565b820191906000526020600020905b81548152906001019060200180831161078157829003601f168201915b5050505050908060020154905083565b600160a060020a038216600090815260016020818152604080842084835281852080548652818452828620805473ffffffffffffffffffffffffffffffffffffffff1916331790555485528252909220835161081293919092019190840190610aa2565b50600160a060020a038216600081815260016020908152604080832083835281842080548552908352908320426002909101559282528190528154919061085883610e49565b919050555081600160a060020a031633600160a060020a03167fdd99aef5e4fdfad84059320be40f5dc0f015dc4025f56bd4010608c6743bc22e42846040516108a2929190610e62565b60405180910390a35050565b6000606060008060008086600160a060020a0316600160a060020a0316815260200190815260200160002054116040518060400160405280600681526020017f363130303031000000000000000000000000000000000000000000000000000081525090610949576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016102699190610db4565b50600160a060020a03841660009081526001602081815260408084209184905283205490929161097891610e83565b81526020808201929092526040908101600090812054600160a060020a03888116835260018086528484209584905293832054911693926109b891610e83565b815260208082019290925260409081016000908120600160a060020a03891682526001808552838320948390529282205490830193926109f791610e83565b815260200190815260200160002060020154818054610a1590610dc7565b80601f0160208091040260200160405190810160405280929190818152602001828054610a4190610dc7565b8015610a8e5780601f10610a6357610100808354040283529160200191610a8e565b820191906000526020600020905b815481529060010190602001808311610a7157829003601f168201915b505050505091509250925092509193909250565b828054610aae90610dc7565b90600052602060002090601f016020900481019282610ad05760008555610b16565b82601f10610ae957805160ff1916838001178555610b16565b82800160010185558215610b16579182015b82811115610b16578251825591602001919060010190610afb565b50610b22929150610b26565b5090565b5b80821115610b225760008155600101610b27565b8035600160a060020a0381168114610b5257600080fd5b919050565b60008060408385031215610b6a57600080fd5b610b7383610b3b565b946020939093013593505050565b600060208284031215610b9357600080fd5b610b9c82610b3b565b9392505050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b600082601f830112610be357600080fd5b813567ffffffffffffffff80821115610bfe57610bfe610ba3565b604051601f8301601f19908116603f01168101908282118183101715610c2657610c26610ba3565b81604052838152866020858801011115610c3f57600080fd5b836020870160208301376000602085830101528094505050505092915050565b60008060408385031215610c7257600080fd5b823567ffffffffffffffff80821115610c8a57600080fd5b610c9686838701610bd2565b93506020850135915080821115610cac57600080fd5b50610cb985828601610bd2565b9150509250929050565b6000815180845260005b81811015610ce957602081850181015186830182015201610ccd565b81811115610cfb576000602083870101525b50601f01601f19169290920160200192915050565b600160a060020a0384168152606060208201526000610d326060830185610cc3565b9050826040830152949350505050565b604081526000610d556040830185610cc3565b8281036020840152610d678185610cc3565b95945050505050565b60008060408385031215610d8357600080fd5b610d8c83610b3b565b9150602083013567ffffffffffffffff811115610da857600080fd5b610cb985828601610bd2565b602081526000610b9c6020830184610cc3565b600281046001821680610ddb57607f821691505b602082108103610e14577f4e487b7100000000000000000000000000000000000000000000000000000000600052602260045260246000fd5b50919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601160045260246000fd5b600060018201610e5b57610e5b610e1a565b5060010190565b828152604060208201526000610e7b6040830184610cc3565b949350505050565b600082821015610e9557610e95610e1a565b50039056fea2646970667358221220fbbb52993f1e8ab835d83e86b17242ead529f69dccd0a59b49c93df6048d078c64736f6c634300080d0033"
}